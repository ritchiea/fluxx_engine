- if @skip_wrapper
  = render :partial => @template,  :locals => {:models => @models}
- else
  %h1
    Listing #{@plural_model_name}

  #card-header
    = form_for :q, :url => url_for(:action => :index), :html => { :method => :get, :class => 'search area-url listing-search' } do |f|
      = f.text_field :q, :value => (params[:q] ? params[:q][:q] : ''), :class => 'filter', :placeholder => 'Search...', :type => 'search'
    %ul.actions
      = render :partial => 'insta/list_actions',  :locals => {:models => @models, :model_class => @model_class}

  - throw Exception.new "Please specify an index template for the #{@plural_model_name} controller, otherwise we cannot render the page" if @template.blank?
  #card-body
    - if @suppress_model_iteration
      = render :partial => @template,  :locals => {:models => @models}
    - else
      %ul.list
        - @models.compact.each do |model|
          %li.entry{'data-model-id' => model.id}
            - unless @suppress_model_anchor_tag
              %a.to-detail{:href => url_for(model)}
                = render :partial => @template,  :locals => {:model => model}
            - else
              = render :partial => @template,  :locals => {:model => model}

  #card-footer= raw(fluxx_paginate(@models) || '<div class="no-pagination">' + pluralize(@models.length, "Entry") + '</div>')

  = render :partial => 'insta/card_settings'